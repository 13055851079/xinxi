<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»å…¸æ‰“ç –å— - HTMLç½‘é¡µå°æ¸¸æˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background-color: #1a1a1a;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            font-family: "å¾®è½¯é›…é»‘", sans-serif;
            color: #fff;
        }
        h1 {
            margin-bottom: 20px;
            color: #ffd700;
            font-size: 28px;
        }
        .score {
            font-size: 22px;
            margin-bottom: 10px;
            color: #61dafb;
        }
        #gameBox {
            width: 800px;
            height: 600px;
            border: 3px solid #ffd700;
            border-radius: 8px;
            background-color: #000;
            position: relative;
            overflow: hidden;
            cursor: none;
        }
        /* æŒ¡æ¿æ ·å¼ */
        #paddle {
            width: 120px;
            height: 15px;
            background-color: #61dafb;
            border-radius: 8px;
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
        }
        /* å°çƒæ ·å¼ */
        #ball {
            width: 20px;
            height: 20px;
            background-color: #ff4757;
            border-radius: 50%;
            position: absolute;
        }
        /* ç –å—æ ·å¼ */
        .brick {
            width: 78px;
            height: 30px;
            background: linear-gradient(45deg, #ffa502, #ff3838);
            border: 1px solid #fff;
            border-radius: 4px;
            position: absolute;
        }
        /* å¼¹çª—æ ·å¼ */
        #modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            font-size: 36px;
            font-weight: bold;
            z-index: 999;
        }
        #modal p {
            margin-bottom: 30px;
            color: #fff;
        }
        #restartBtn {
            padding: 12px 30px;
            font-size: 20px;
            background-color: #ffd700;
            color: #000;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }
        #restartBtn:hover {
            background-color: #fff;
        }
    </style>
</head>
<body>
    <h1>HTML æ‰“ç –å—å°æ¸¸æˆ</h1>
    <div class="score">å¾—åˆ†: <span id="scoreNum">0</span></div>
    <!-- æ¸¸æˆä¸»å®¹å™¨ -->
    <div id="gameBox">
        <div id="paddle"></div>
        <div id="ball"></div>
    </div>
    <!-- æ¸¸æˆå¼¹çª— -->
    <div id="modal">
        <p id="modalText"></p>
        <button id="restartBtn">é‡æ–°å¼€å§‹æ¸¸æˆ</button>
    </div>

    <script>
        // 1. è·å–æ¸¸æˆå…ƒç´ 
        const gameBox = document.getElementById('gameBox');
        const paddle = document.getElementById('paddle');
        const ball = document.getElementById('ball');
        const scoreNum = document.getElementById('scoreNum');
        const modal = document.getElementById('modal');
        const modalText = document.getElementById('modalText');
        const restartBtn = document.getElementById('restartBtn');

        // 2. æ¸¸æˆåŸºç¡€å‚æ•°
        let score = 0;
        let ballX = 400, ballY = 300; // å°çƒåˆå§‹ä½ç½®
        let ballSpeedX = 5, ballSpeedY = -5; // å°çƒç§»åŠ¨é€Ÿåº¦
        let paddleX = 340; // æŒ¡æ¿åˆå§‹ä½ç½®
        const paddleWidth = 120;
        const gameWidth = 800;
        const gameHeight = 600;
        const brickRow = 6; // ç –å—è¡Œæ•°
        const brickCol = 10; // ç –å—åˆ—æ•°
        let bricks = []; // ç –å—æ•°ç»„

        // 3. åˆ›å»ºç –å—å¢™
        function createBricks() {
            for(let i = 0; i < brickRow; i++) {
                for(let j = 0; j < brickCol; j++) {
                    const brick = document.createElement('div');
                    brick.className = 'brick';
                    brick.style.left = j * 80 + 1 + 'px';
                    brick.style.top = i * 35 + 30 + 'px';
                    gameBox.appendChild(brick);
                    bricks.push(brick);
                }
            }
        }

        // 4. é¼ æ ‡æ§åˆ¶æŒ¡æ¿ç§»åŠ¨
        gameBox.addEventListener('mousemove', (e) => {
            // è·å–é¼ æ ‡åœ¨æ¸¸æˆæ¡†å†…çš„Xåæ ‡
            const mouseX = e.clientX - gameBox.getBoundingClientRect().left;
            // é™åˆ¶æŒ¡æ¿ä¸è¶…å‡ºæ¸¸æˆè¾¹ç•Œ
            paddleX = Math.max(0, Math.min(mouseX - paddleWidth/2, gameWidth - paddleWidth));
            paddle.style.left = paddleX + 'px';
        });

        // 5. æ¸¸æˆæ ¸å¿ƒè¿åŠ¨é€»è¾‘
        function gameLoop() {
            // å°çƒç§»åŠ¨
            ballX += ballSpeedX;
            ballY += ballSpeedY;
            ball.style.left = ballX + 'px';
            ball.style.top = ballY + 'px';

            // å°çƒç¢°æ’å·¦å³å¢™å£åå¼¹
            if(ballX <= 0 || ballX >= gameWidth - 20) {
                ballSpeedX = -ballSpeedX;
            }
            // å°çƒç¢°æ’é¡¶éƒ¨å¢™å£åå¼¹
            if(ballY <= 0) {
                ballSpeedY = -ballSpeedY;
            }

            // å°çƒç¢°æ’æŒ¡æ¿åå¼¹
            const paddleTop = gameHeight - 35;
            const paddleLeft = paddleX;
            if(ballY >= paddleTop - 20 && ballX >= paddleLeft && ballX <= paddleLeft + paddleWidth) {
                // ç¢°åˆ°æŒ¡æ¿ç»™å°çƒä¸€ç‚¹åŠ é€Ÿåº¦ï¼Œæ¸¸æˆè¶Šæ¥è¶Šéš¾
                ballSpeedY = -ballSpeedY - 0.2;
                ballSpeedX = ballSpeedX + ( (ballX - (paddleLeft + paddleWidth/2)) / 20 );
            }

            // å°çƒæ‰è½ï¼Œæ¸¸æˆå¤±è´¥
            if(ballY >= gameHeight) {
                showModal('æ¸¸æˆå¤±è´¥ï¼å†æ¥å†å‰ ğŸ˜¥');
                return;
            }

            // å°çƒç¢°æ’ç –å—æ£€æµ‹
            bricks.forEach((brick, index) => {
                const brickRect = brick.getBoundingClientRect();
                const ballRect = ball.getBoundingClientRect();
                // åˆ¤æ–­å°çƒå’Œç –å—æ˜¯å¦ç¢°æ’
                if(ballRect.right > brickRect.left && ballRect.left < brickRect.right &&
                   ballRect.bottom > brickRect.top && ballRect.top < brickRect.bottom) {
                    // ç –å—æ¶ˆå¤±
                    brick.remove();
                    bricks.splice(index, 1);
                    // å°çƒåå¼¹
                    ballSpeedY = -ballSpeedY;
                    // åŠ åˆ†
                    score += 10;
                    scoreNum.innerHTML = score;
                    // æ‰€æœ‰ç –å—å‡»ç¢ï¼Œæ¸¸æˆèƒœåˆ©
                    if(bricks.length === 0) {
                        showModal(`æ­å–œèƒœåˆ©ï¼æ€»åˆ†: ${score} ğŸ‰`);
                        return;
                    }
                }
            });

            // å¾ªç¯æ‰§è¡Œæ¸¸æˆé€»è¾‘
            requestAnimationFrame(gameLoop);
        }

        // 6. æ˜¾ç¤ºå¼¹çª—ï¼ˆèƒœåˆ©/å¤±è´¥ï¼‰
        function showModal(text) {
            modalText.innerHTML = text;
            modal.style.display = 'flex';
        }

        // 7. é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            // é‡ç½®å‚æ•°
            score = 0;
            scoreNum.innerHTML = 0;
            ballX = 400;
            ballY = 300;
            ballSpeedX = 5;
            ballSpeedY = -5;
            paddleX = 340;
            paddle.style.left = paddleX + 'px';
            // æ¸…ç©ºæ‰€æœ‰ç –å—
            bricks.forEach(brick => brick.remove());
            bricks = [];
            // é‡æ–°åˆ›å»ºç –å—
            createBricks();
            // å…³é—­å¼¹çª—
            modal.style.display = 'none';
            // é‡æ–°å¼€å§‹æ¸¸æˆå¾ªç¯
            gameLoop();
        }

        // ç»‘å®šé‡æ–°å¼€å§‹æŒ‰é’®äº‹ä»¶
        restartBtn.addEventListener('click', restartGame);

        // åˆå§‹åŒ–æ¸¸æˆ - åˆ›å»ºç –å— + å¯åŠ¨æ¸¸æˆ
        createBricks();
        gameLoop();
    </script>
</body>
</html>